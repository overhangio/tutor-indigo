(function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{enumerable:!0,get:d})},b.r=function(a){'undefined'!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:'Module'}),Object.defineProperty(a,'__esModule',{value:!0})},b.t=function(a,c){if(1&c&&(a=b(a)),8&c)return a;if(4&c&&'object'==typeof a&&a&&a.__esModule)return a;var d=Object.create(null);if(b.r(d),Object.defineProperty(d,'default',{enumerable:!0,value:a}),2&c&&'string'!=typeof a)for(var e in a)b.d(d,e,function(b){return a[b]}.bind(null,e));return d},b.n=function(a){var c=a&&a.__esModule?function(){return a['default']}:function(){return a};return b.d(c,'a',c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p='',b(b.s=1)})([function(){},function(a,b,c){'use strict';function d(a){'@babel/helpers - typeof';return d='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&'function'==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?'symbol':typeof a},d(a)}function e(a,b){a.prototype=Object.create(b.prototype),a.prototype.constructor=a,f(a,b)}function f(a,b){return f=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a},f(a,b)}c.r(b);var g=c(0),h=function(){function a(b,c){var d=this;this.params=b,this.callbacks=c||{},this.callbacks.onOpened=c.onOpened||function(){},this.callbacks.onLoaded=c.onLoaded||function(){},this.opened=!1,this.toLoad=['door','previewImage'],this.container=document.createElement('div'),this.container.classList.add('h5p-advent-calendar-square-content'),this.container.classList.add('h5p-advent-calendar-color-scheme-'.concat(a.colorSchemeNames[b.day%a.colorSchemeNames.length])),b.hideDoorBorder&&this.container.classList.add('h5p-advent-calendar-hide-door-border'),b.hideDoorFrame&&this.container.classList.add('h5p-advent-calendar-hide-door-frame'),this.container.setAttribute('role','button'),this.container.setAttribute('aria-label',b.day),this.container.setAttribute('tabIndex',0);var e=''.concat(this.params.a11y.door,' ').concat(this.params.day,'.');this.canBeOpened()||(e+=this.params.a11y.locked),this.container.setAttribute('aria-label',e),this.canBeOpened()||this.container.classList.add('h5p-advent-calendar-disabled'),this.container.addEventListener('click',function(a){d.handleClick(a)}),this.container.addEventListener('keypress',function(a){d.handleKeypress(a)});var f=document.createElement('div');f.classList.add('h5p-advent-calendar-door-container'),this.container.appendChild(f);var g=document.createElement('div');g.classList.add('h5p-advent-calendar-doorway'),g.classList.add('h5p-advent-calendar-left'),f.appendChild(g);var h=document.createElement('div');h.classList.add('h5p-advent-calendar-doorway'),h.classList.add('h5p-advent-calendar-right'),f.appendChild(h);var i=document.createElement('div');if(i.classList.add('h5p-advent-calendar-door'),i.classList.add('h5p-advent-calendar-left'),g.appendChild(i),!b.hideNumbers){var j=document.createElement('div');j.classList.add('h5p-advent-calendar-door-number'),j.innerText=b.day,i.appendChild(j)}if(!b.hideDoorKnobs){var k=document.createElement('div');k.classList.add('h5p-advent-calendar-doorknob'),i.appendChild(k)}var l=document.createElement('div');if(l.classList.add('h5p-advent-calendar-door'),l.classList.add('h5p-advent-calendar-right'),h.appendChild(l),!b.hideDoorKnobs){var m=document.createElement('div');m.classList.add('h5p-advent-calendar-doorknob'),l.appendChild(m)}if(this.params.content.doorCover&&this.params.content.doorCover.path){var n=H5P.getPath(this.params.content.doorCover.path,this.params.contentId);if(n){var o=document.createElement('img');o.src=n,o.addEventListener('load',function(){i.style.backgroundImage='url("'.concat(n,'")'),l.style.backgroundImage='url("'.concat(n,'")'),o=null,d.handleLoaded('door')}),this.container.classList.add('h5p-advent-calendar-cover-image')}}else this.toLoad=this.toLoad.filter(function(a){return'door'!==a});if(this.previewImage=document.createElement('button'),this.previewImage.setAttribute('aria-label',this.params.a11y.content.replace('@door',''.concat(this.params.a11y.door,' ').concat(this.params.day,'.'))),this.previewImage.setAttribute('tabIndex',-1),this.previewImage.classList.add('h5p-advent-calendar-preview-image'),this.previewImage.classList.add('h5p-advent-calendar-'.concat(b.content.type,'-symbol')),this.container.appendChild(this.previewImage),this.params.content.previewImage&&this.params.content.previewImage.path){var p=H5P.getPath(this.params.content.previewImage.path,this.params.contentId);if(p){var q=document.createElement('img');q.src=p,q.addEventListener('load',function(){d.previewImage.style.backgroundImage='url("'.concat(p,'")'),q=null,d.handleLoaded('previewImage')})}}else this.toLoad=this.toLoad.filter(function(a){return'previewImage'!==a}),this.previewImage.innerText=b.day;0===this.toLoad.length&&this.callbacks.onLoaded(),this.previewImage.addEventListener('click',function(){d.open({delay:0})}),b.open&&this.open({skipCallback:!0})}var b=a.prototype;return b.getDOM=function(){return this.container},b.handleKeypress=function(a){(13===a.keyCode||32===a.keyCode)&&this.handleClick(a)},b.handleClick=function(a){var b=this;!this.canBeOpened()||this.isOpen()||(a.preventDefault(),this.open(),this.container.removeEventListener('click',function(a){b.handleClick(a)}),this.container.removeEventListener('keypress',function(a){b.handleKeypress(a)}))},b.handleLoaded=function(a){this.toLoad=this.toLoad.filter(function(b){return b!==a}),0===this.toLoad.length&&this.callbacks.onLoaded()},b.focus=function(){this.isOpen()?this.previewImage.focus():this.container.focus()},b.open=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.opened=!0,this.container.classList.add('h5p-advent-calendar-open'),this.container.setAttribute('tabIndex',-1),this.container.removeAttribute('role'),this.previewImage.setAttribute('tabIndex',0),a.skipCallback||this.callbacks.onOpened(this.params.day,a.delay)},b.lock=function(){this.locked=!0,this.container.classList.add('h5p-advent-calendar-disabled')},b.unlock=function(){this.container.classList.remove('h5p-advent-calendar-disabled'),this.locked=!1},b.isOpen=function(){return this.opened},b.canBeOpened=function(){if(this.locked)return!1;if(this.params.designMode)return!0;var a=new Date;return 11===a.getMonth()&&a.getDate()>=this.params.day},a}();h.colorSchemeNames=['red','white','lightgreen','darkgreen'];var i=function(){function a(){}return a.extend=function(){for(var a=1;a<arguments.length;a++)for(var b in arguments[a])arguments[a].hasOwnProperty(b)&&('object'===d(arguments[0][b])&&'object'===d(arguments[a][b])?this.extend(arguments[0][b],arguments[a][b]):arguments[0][b]=arguments[a][b]);return arguments[0]},a.htmlDecode=function(a){var b=new DOMParser().parseFromString(a,'text/html');return b.documentElement.textContent},a.shuffleArray=function(a){var b,c,d;for(d=a.length-1;0<d;d--)b=Math.floor(Math.random()*(d+1)),c=a[d],a[d]=a[b],a[b]=c},a}(),j=i,k=function(){function a(a){var b=this,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.params=j.extend({container:document.body,content:document.createElement('div'),styleBase:'h5p-advent-calendar-overlay',position:{offsetHorizontal:0,offsetVertical:0},a11y:{closeWindow:'Close'}},a),this.callbacks=c,this.callbacks.onClose=c.onClose||function(){},this.isVisible=!1,this.focusableElements=[],this.overlay=document.createElement('div'),this.overlay.classList.add(''.concat(this.params.styleBase,'-outer-wrapper')),this.overlay.classList.add('h5p-advent-calendar-invisible'),this.overlay.setAttribute('role','dialog'),this.params.a11y.title&&this.overlay.setAttribute('aria-label',this.params.a11y.title),this.overlay.setAttribute('aria-modal','true'),this.content=document.createElement('div'),this.content.classList.add(''.concat(this.params.styleBase,'-content')),this.content.appendChild(this.params.content),this.overlay.appendChild(this.content),this.buttonClose=document.createElement('button'),this.buttonClose.classList.add(''.concat(this.params.styleBase,'-button-close')),this.buttonClose.setAttribute('aria-label',this.params.a11y.closeWindow),this.buttonClose.addEventListener('click',function(){b.callbacks.onClose()}),this.overlay.appendChild(this.buttonClose),document.addEventListener('focus',function(a){b.isVisible&&0!==b.focusableElements.length&&b.trapFocus(a)},!0),this.blocker=document.createElement('div'),this.blocker.classList.add('h5p-advent-calendar-overlay-blocker'),this.blocker.classList.add('h5p-advent-calendar-display-none'),this.blocker.addEventListener('click',function(){b.callbacks.onClose()}),this.modifierClasses=[]}var b=a.prototype;return b.getDOM=function(){return this.overlay},b.setContent=function(a){for(;this.content.firstChild;)this.content.removeChild(this.content.firstChild);this.content.appendChild(a)},b.setModifierClass=function(a){var b=this,c=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];c&&(this.modifierClasses.forEach(function(a){b.overlay.classList.remove(a)}),this.modifierClasses=[]),-1===this.modifierClasses.indexOf(a)&&this.modifierClasses.push(a),this.overlay.classList.add(a)},b.trapFocus=function(a){return this.isChild(a.target)?void(this.currentFocusElement=a.target):void(this.currentFocusElement=this.currentFocusElement===this.focusableElements[0]?this.focusableElements[this.focusableElements.length-1]:this.focusableElements[0],this.currentFocusElement.focus())},b.isChild=function(a){var b=a.parentNode;return!!b&&(b===this.overlay||this.isChild(b))},b.updateFocusableElements=function(){this.focusableElements=[].slice.call(this.overlay.querySelectorAll('video, audio, button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')).filter(function(a){return'true'!==a.getAttribute('disabled')&&!0!==a.getAttribute('disabled')})},b.show=function(){var a=this;this.blockerAppended||(this.container=document.body.querySelector('.h5p-container'),this.container.appendChild(this.blocker)),this.blockerAppended=!0,this.overlay.classList.remove('h5p-advent-calendar-invisible'),this.blocker.classList.remove('h5p-advent-calendar-display-none'),setTimeout(function(){a.updateFocusableElements(),0<a.focusableElements.length&&a.focusableElements[0].focus(),a.isVisible=!0},0)},b.hide=function(){this.isVisible=!1,this.overlay.classList.add('h5p-advent-calendar-invisible'),this.blocker.classList.add('h5p-advent-calendar-display-none')},a}(),l=function(){function a(a){this.classNameBase=a,this.container=document.createElement('div'),this.container.classList.add(''.concat(this.classNameBase,'-container')),this.spinnerElement=document.createElement('div'),this.spinnerElement.classList.add(a);var b=document.createElement('div');b.classList.add(''.concat(this.classNameBase,'-circle-head')),this.spinnerElement.appendChild(b);var c=document.createElement('div');c.classList.add(''.concat(this.classNameBase,'-circle-neck-upper')),this.spinnerElement.appendChild(c);var d=document.createElement('div');d.classList.add(''.concat(this.classNameBase,'-circle-neck-lower')),this.spinnerElement.appendChild(d);var e=document.createElement('div');e.classList.add(''.concat(this.classNameBase,'-circle-body')),this.spinnerElement.appendChild(e),this.container.appendChild(this.spinnerElement)}var b=a.prototype;return b.getDOM=function(){return this.container},b.show=function(){this.container.classList.remove(''.concat(this.classNameBase,'-none'))},b.hide=function(){this.container.classList.add(''.concat(this.classNameBase,'-none'))},a}(),m=function(a){function b(b,c){var d,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};for(var f in d=a.call(this)||this,d.params=j.extend({behaviour:{autoplay:!1,snow:!1,hideDoorBorder:!1,hideNumbers:!1,hideDoorKnobs:!1,hideDoorFrame:!1,randomize:!1,keepImageOrder:!1},l10n:{nothingToSee:'There is nothing to see here!\uD83C\uDF84'},a11y:{door:'Door',locked:'Locked. It is not time to open this one yet.',content:'Content of @door',closeWindow:'Close window',mute:'Mute audio',unmute:'Unmute audio'}},b),d.doorsLoaded=0,d.continueBackgroundMusic=null,d.params.l10n)d.params.l10n[f]=j.htmlDecode(d.params.l10n[f]);for(var g in d.params.a11y)d.params.a11y[g]=j.htmlDecode(d.params.a11y[g]);for(;24>b.doors.length;)b.doors.push({});var m=b.behaviour.doorImageTemplate&&b.behaviour.doorImageTemplate.path?b.behaviour.doorImageTemplate:null;d.doors=b.doors.map(function(a,b){return m&&!a.doorCover&&(a.doorCover=m),a.type||(a.type='text',a.text.params.text=d.params.l10n.nothingToSee),{day:b+1,content:a}}),e.previousState&&Array.isArray(e.previousState)?d.doors=e.previousState.map(function(a){var b=d.doors[a.day-1];return b.open=a.open,b}):b.behaviour.randomize&&j.shuffleArray(d.doors);var n=d.doors.map(function(a){return{day:a.day,doorCover:a.content.doorCover}});if(b.behaviour.keepImageOrder&&d.doors.forEach(function(a,b){a.content.doorCover=n.filter(function(a){return a.day===b+1})[0].doorCover}),d.instances=Array(25),d.muted=!d.params.behaviour.autoplay,d.container=document.createElement('div'),d.container.classList.add('h5p-advent-calendar-container'),d.spinner=new l('h5p-advent-calendar-spinner'),d.container.appendChild(d.spinner.getDOM()),d.table=document.createElement('div'),d.table.classList.add('h5p-advent-calendar-table'),d.table.classList.add('h5p-advent-calendar-display-none'),b.behaviour.backgroundImage&&b.behaviour.backgroundImage.path){var o=document.createElement('img');H5P.setSource(o,b.behaviour.backgroundImage,c),d.table.style.backgroundImage='url(\''.concat(o.src,'\')')}d.container.appendChild(d.table),d.doors.forEach(function(a){var e=document.createElement('div');e.classList.add('h5p-advent-calendar-square'),d.table.appendChild(e),a.door=new h({contentId:c,day:a.day,content:a.content,open:a.open,hideDoorBorder:b.behaviour.hideDoorBorder,hideNumbers:b.behaviour.hideNumbers,hideDoorKnobs:b.behaviour.hideDoorKnobs,hideDoorFrame:b.behaviour.hideDoorFrame,designMode:b.behaviour.designMode,a11y:{door:d.params.a11y.door,locked:d.params.a11y.locked,content:d.params.a11y.content}},{onOpened:function(a,b){d.handleOverlayOpened(a,b)},onLoaded:function(){d.handleDoorLoaded()}}),e.appendChild(a.door.getDOM())}),b.behaviour.backgroundMusic&&(d.backgroundMusic=d.createAudio(b.behaviour.backgroundMusic,c),d.buttonAudio=document.createElement('button'),d.buttonAudio.classList.add('h5p-advent-calendar-audio-button'),d.muted?(d.buttonAudio.classList.add('muted'),d.buttonAudio.setAttribute('aria-label',d.params.a11y.unmute)):(d.buttonAudio.classList.add('unmuted'),d.buttonAudio.setAttribute('aria-label',d.params.a11y.mute)),d.buttonAudio.addEventListener('click',function(){var a=d.toggleButtonAudio();a?(d.buttonAudio.setAttribute('aria-label',d.params.a11y.unmute),d.stopAudio()):(d.buttonAudio.setAttribute('aria-label',d.params.a11y.mute),d.playAudio())}),d.container.appendChild(d.buttonAudio),b.behaviour.autoplay&&d.playAudio());var p=new Date;if(b.behaviour.snow||11===p.getMonth()&&24<=p.getDate()){var q=document.createElement('div');q.classList.add('h5p-advent-calendar-sky'),d.container.appendChild(q);var r=document.createElement('div');r.classList.add('h5p-advent-calendar-snow'),q.appendChild(r);for(var s,t=0;30>t;t++)s=document.createElement('span'),r.appendChild(s)}return d.overlay=new k({a11y:{closeWindow:d.params.a11y.closeWindow}},{onClose:function(){d.handleOverlayClosed()}}),d.container.appendChild(d.overlay.getDOM()),d.on('resize',function(){d.resize()}),d}e(b,a);var c=b.prototype;return c.attach=function(a){a.get(0).classList.add('h5p-advent-calendar'),a.get(0).appendChild(this.container),this.trigger('resize')},c.resize=function(){this.table.style.fontSize=''.concat(this.container.offsetWidth/48,'px'),this.currentDayOpened&&(this.instances[this.currentDayOpened]&&this.instances[this.currentDayOpened].instance.trigger('resize'),this.h5pContainer=this.h5pContainer||document.body.querySelector('.h5p-container'),this.h5pContainer&&this.instances[this.currentDayOpened]&&(this.instances[this.currentDayOpened].wrapper.style.maxHeight='calc('.concat(this.h5pContainer.offsetHeight,'px - 7em)')))},c.getCurrentState=function(){return this.doors.map(function(a){return{day:a.day,open:a.door.isOpen()}})},c.handleOverlayOpened=function(a){var b=this,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1e3;this.doors.forEach(function(a){return a.door.lock()}),this.currentDayOpened=a;var d=this.doors.filter(function(b){return b.day===a})[0];if(this.overlay.setModifierClass('h5p-advent-calendar-content-type-'.concat(d.content.type)),!this.instances[a]){var e=document.createElement('div');if(e.classList.add('h5p-advent-calendar-instance-wrapper'),!d.content[d.content.type])return this.doors.forEach(function(a){return a.door.unlock()}),void d.door.focus();var f;if('audio'===d.content.type)f=new H5P.Audio({files:d.content.audio,playerMode:'full',fitToWrapper:!1,controls:!0,autoplay:d.content.autoplay||!1},this.contentId),f.attach(H5P.jQuery(e)),f.audio.style.width='100%',this.backgroundMusic&&(f.audio.addEventListener('play',function(){b.handleOverlayMedia('play')}),f.audio.addEventListener('pause',function(){b.handleOverlayMedia('stop')}),f.audio.addEventListener('ended',function(){b.handleOverlayMedia('stop')}));else if('video'===d.content.type){var g=!(0<d.content.video.length&&'video/YouTube'===d.content.video[0].mime);f=new H5P.Video({sources:d.content.video,visuals:{fit:g,controls:!0},playback:{autoplay:d.content.autoplay||!1,loop:!1}},this.contentId),f.attach(H5P.jQuery(e)),this.backgroundMusic&&f.on('stateChange',function(a){a.data===H5P.Video.PLAYING?b.handleOverlayMedia('play'):(a.data===H5P.Video.PAUSED||a.data===H5P.Video.ENDED)&&b.handleOverlayMedia('stop')})}else f=H5P.newRunnable(d.content[d.content.type],this.contentId,H5P.jQuery(e));'image'===d.content.type&&f.on('loaded',function(){b.trigger('resize')}),this.instances[a]={instance:f,wrapper:e}}this.popupWaiting&&clearTimeout(this.popupWaiting),this.popupWaiting=setTimeout(function(){if('link'===d.content.type){var c=b.instances[a].wrapper.querySelector('.h5p-link a').getAttribute('href');window.open(c,'_blank')}else b.resize(),b.overlay.setContent(b.instances[a].wrapper),b.overlay.show(),b.instances[a].instance.trigger('resize'),d.content.type&&d.content.autoplay&&b.instances[a].instance.audio&&b.instances[a].instance.audio.paused&&b.instances[a].instance.play();b.doors.forEach(function(a){return a.door.unlock()})},c)},c.handleOverlayClosed=function(){var a=this;this.overlay.hide();var b=this.instances[this.currentDayOpened].instance;'function'==typeof b.pause&&b.pause(),this.doors.filter(function(b){return b.day===a.currentDayOpened})[0].door.focus()},c.handleOverlayMedia=function(a){this.backgroundMusic&&this.backgroundMusic.player&&('play'===a?(this.continueBackgroundMusic=!this.backgroundMusic.player.paused,this.continueBackgroundMusic&&this.stopAudio()):'stop'==a&&this.continueBackgroundMusic&&this.playAudio())},c.handleDoorLoaded=function(){this.doorsLoaded++,24===this.doorsLoaded&&(this.spinner.hide(),this.table.classList.remove('h5p-advent-calendar-display-none'),this.trigger('resize'))},c.createAudio=function(a,b){var c=this;if(!a||1>a.length||!a[0].path)return null;var d=document.createElement('audio');return d.src=H5P.getPath(a[0].path,b),d.addEventListener('ended',function(){c.playAudio()}),{player:d,promise:null}},c.toggleButtonAudio=function(a){if(this.buttonAudio)return this.muted='boolean'==typeof a?a:!this.muted,this.muted?(this.buttonAudio.classList.remove('unmuted'),this.buttonAudio.classList.add('muted'),this.buttonAudio.setAttribute('aria-label',this.params.a11y.unmute)):(this.buttonAudio.classList.add('unmuted'),this.buttonAudio.classList.remove('muted'),this.buttonAudio.setAttribute('aria-label',this.params.a11y.mute)),this.muted},c.playAudio=function(){var a=this;this.backgroundMusic&&(this.backgroundMusic.promise||(this.backgroundMusic.promise=this.backgroundMusic.player.play(),this.backgroundMusic.promise&&this.backgroundMusic.promise.then(function(){a.backgroundMusic.promise=null,a.toggleButtonAudio(!1)})['catch'](function(){a.backgroundMusic.promise=null,a.toggleButtonAudio(!0)})))},c.stopAudio=function(){var a=this;this.backgroundMusic.promise?this.backgroundMusic.promise.then(function(){a.backgroundMusic.player.pause(),a.backgroundMusic.promise=null,a.toggleButtonAudio(!0)}):(this.backgroundMusic.player.pause(),this.toggleButtonAudio(!0))},b}(H5P.EventDispatcher);H5P=H5P||{},H5P.AdventCalendar=m}]);