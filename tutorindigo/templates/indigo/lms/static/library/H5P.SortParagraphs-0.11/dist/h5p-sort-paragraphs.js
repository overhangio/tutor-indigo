!function(){var t={4370:function(t,e,n){n(8783),n(1038);var r=n(857);t.exports=r.Array.from},9662:function(t,e,n){var r=n(614),a=n(6330);t.exports=function(t){if(r(t))return t;throw TypeError(a(t)+" is not a function")}},6077:function(t,e,n){var r=n(614);t.exports=function(t){if("object"==typeof t||r(t))return t;throw TypeError("Can't set "+String(t)+" as a prototype")}},9670:function(t,e,n){var r=n(111);t.exports=function(t){if(r(t))return t;throw TypeError(String(t)+" is not an object")}},8457:function(t,e,n){"use strict";var r=n(9974),a=n(7908),i=n(3411),s=n(7659),o=n(4411),c=n(6244),u=n(6135),l=n(8554),h=n(1246);t.exports=function(t){var e=a(t),n=o(this),p=arguments.length,d=p>1?arguments[1]:void 0,g=void 0!==d;g&&(d=r(d,p>2?arguments[2]:void 0,2));var f,b,v,m,y,w,D=h(e),x=0;if(!D||this==Array&&s(D))for(f=c(e),b=n?new this(f):Array(f);f>x;x++)w=g?d(e[x],x):e[x],u(b,x,w);else for(y=(m=l(e,D)).next,b=n?new this:[];!(v=y.call(m)).done;x++)w=g?i(m,d,[v.value,x],!0):v.value,u(b,x,w);return b.length=x,b}},1318:function(t,e,n){var r=n(5656),a=n(1400),i=n(6244),s=function(t){return function(e,n,s){var o,c=r(e),u=i(c),l=a(s,u);if(t&&n!=n){for(;u>l;)if((o=c[l++])!=o)return!0}else for(;u>l;l++)if((t||l in c)&&c[l]===n)return t||l||0;return!t&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},3411:function(t,e,n){var r=n(9670),a=n(9212);t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(e){a(t,"throw",e)}}},7072:function(t,e,n){var r=n(5112)("iterator"),a=!1;try{var i=0,s={next:function(){return{done:!!i++}},return:function(){a=!0}};s[r]=function(){return this},Array.from(s,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!a)return!1;var n=!1;try{var i={};i[r]=function(){return{next:function(){return{done:n=!0}}}},t(i)}catch(t){}return n}},4326:function(t){var e={}.toString;t.exports=function(t){return e.call(t).slice(8,-1)}},648:function(t,e,n){var r=n(1694),a=n(614),i=n(4326),s=n(5112)("toStringTag"),o="Arguments"==i(function(){return arguments}());t.exports=r?i:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),s))?n:o?i(e):"Object"==(r=i(e))&&a(e.callee)?"Arguments":r}},9920:function(t,e,n){var r=n(2597),a=n(3887),i=n(1236),s=n(3070);t.exports=function(t,e){for(var n=a(e),o=s.f,c=i.f,u=0;u<n.length;u++){var l=n[u];r(t,l)||o(t,l,c(e,l))}}},8544:function(t,e,n){var r=n(7293);t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},4994:function(t,e,n){"use strict";var r=n(3383).IteratorPrototype,a=n(30),i=n(9114),s=n(8003),o=n(7497),c=function(){return this};t.exports=function(t,e,n){var u=e+" Iterator";return t.prototype=a(r,{next:i(1,n)}),s(t,u,!1,!0),o[u]=c,t}},8880:function(t,e,n){var r=n(9781),a=n(3070),i=n(9114);t.exports=r?function(t,e,n){return a.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},9114:function(t){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},6135:function(t,e,n){"use strict";var r=n(4948),a=n(3070),i=n(9114);t.exports=function(t,e,n){var s=r(e);s in t?a.f(t,s,i(0,n)):t[s]=n}},654:function(t,e,n){"use strict";var r=n(2109),a=n(1913),i=n(6530),s=n(614),o=n(4994),c=n(9518),u=n(7674),l=n(8003),h=n(8880),p=n(1320),d=n(5112),g=n(7497),f=n(3383),b=i.PROPER,v=i.CONFIGURABLE,m=f.IteratorPrototype,y=f.BUGGY_SAFARI_ITERATORS,w=d("iterator"),D="keys",x="values",E="entries",S=function(){return this};t.exports=function(t,e,n,i,d,f,T){o(n,e,i);var A,O,P,M=function(t){if(t===d&&j)return j;if(!y&&t in k)return k[t];switch(t){case D:case x:case E:return function(){return new n(this,t)}}return function(){return new n(this)}},L=e+" Iterator",I=!1,k=t.prototype,C=k[w]||k["@@iterator"]||d&&k[d],j=!y&&C||M(d),B="Array"==e&&k.entries||C;if(B&&(A=c(B.call(new t)))!==Object.prototype&&A.next&&(a||c(A)===m||(u?u(A,m):s(A[w])||p(A,w,S)),l(A,L,!0,!0),a&&(g[L]=S)),b&&d==x&&C&&C.name!==x&&(!a&&v?h(k,"name",x):(I=!0,j=function(){return C.call(this)})),d)if(O={values:M(x),keys:f?j:M(D),entries:M(E)},T)for(P in O)(y||I||!(P in k))&&p(k,P,O[P]);else r({target:e,proto:!0,forced:y||I},O);return a&&!T||k[w]===j||p(k,w,j,{name:d}),g[e]=j,O}},9781:function(t,e,n){var r=n(7293);t.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},317:function(t,e,n){var r=n(7854),a=n(111),i=r.document,s=a(i)&&a(i.createElement);t.exports=function(t){return s?i.createElement(t):{}}},8113:function(t,e,n){var r=n(5005);t.exports=r("navigator","userAgent")||""},7392:function(t,e,n){var r,a,i=n(7854),s=n(8113),o=i.process,c=i.Deno,u=o&&o.versions||c&&c.version,l=u&&u.v8;l?a=(r=l.split("."))[0]<4?1:r[0]+r[1]:s&&(!(r=s.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=s.match(/Chrome\/(\d+)/))&&(a=r[1]),t.exports=a&&+a},748:function(t){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:function(t,e,n){var r=n(7854),a=n(1236).f,i=n(8880),s=n(1320),o=n(3505),c=n(9920),u=n(4705);t.exports=function(t,e){var n,l,h,p,d,g=t.target,f=t.global,b=t.stat;if(n=f?r:b?r[g]||o(g,{}):(r[g]||{}).prototype)for(l in e){if(p=e[l],h=t.noTargetGet?(d=a(n,l))&&d.value:n[l],!u(f?l:g+(b?".":"#")+l,t.forced)&&void 0!==h){if(typeof p==typeof h)continue;c(p,h)}(t.sham||h&&h.sham)&&i(p,"sham",!0),s(n,l,p,t)}}},7293:function(t){t.exports=function(t){try{return!!t()}catch(t){return!0}}},9974:function(t,e,n){var r=n(9662);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,a){return t.call(e,n,r,a)}}return function(){return t.apply(e,arguments)}}},6530:function(t,e,n){var r=n(9781),a=n(2597),i=Function.prototype,s=r&&Object.getOwnPropertyDescriptor,o=a(i,"name"),c=o&&"something"===function(){}.name,u=o&&(!r||r&&s(i,"name").configurable);t.exports={EXISTS:o,PROPER:c,CONFIGURABLE:u}},5005:function(t,e,n){var r=n(7854),a=n(614),i=function(t){return a(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?i(r[t]):r[t]&&r[t][e]}},1246:function(t,e,n){var r=n(648),a=n(8173),i=n(7497),s=n(5112)("iterator");t.exports=function(t){if(null!=t)return a(t,s)||a(t,"@@iterator")||i[r(t)]}},8554:function(t,e,n){var r=n(9662),a=n(9670),i=n(1246);t.exports=function(t,e){var n=arguments.length<2?i(t):e;if(r(n))return a(n.call(t));throw TypeError(String(t)+" is not iterable")}},8173:function(t,e,n){var r=n(9662);t.exports=function(t,e){var n=t[e];return null==n?void 0:r(n)}},7854:function(t,e,n){var r=function(t){return t&&t.Math==Math&&t};t.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},2597:function(t,e,n){var r=n(7908),a={}.hasOwnProperty;t.exports=Object.hasOwn||function(t,e){return a.call(r(t),e)}},3501:function(t){t.exports={}},490:function(t,e,n){var r=n(5005);t.exports=r("document","documentElement")},4664:function(t,e,n){var r=n(9781),a=n(7293),i=n(317);t.exports=!r&&!a((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},8361:function(t,e,n){var r=n(7293),a=n(4326),i="".split;t.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==a(t)?i.call(t,""):Object(t)}:Object},2788:function(t,e,n){var r=n(614),a=n(5465),i=Function.toString;r(a.inspectSource)||(a.inspectSource=function(t){return i.call(t)}),t.exports=a.inspectSource},9909:function(t,e,n){var r,a,i,s=n(8536),o=n(7854),c=n(111),u=n(8880),l=n(2597),h=n(5465),p=n(6200),d=n(3501),g="Object already initialized",f=o.WeakMap;if(s||h.state){var b=h.state||(h.state=new f),v=b.get,m=b.has,y=b.set;r=function(t,e){if(m.call(b,t))throw new TypeError(g);return e.facade=t,y.call(b,t,e),e},a=function(t){return v.call(b,t)||{}},i=function(t){return m.call(b,t)}}else{var w=p("state");d[w]=!0,r=function(t,e){if(l(t,w))throw new TypeError(g);return e.facade=t,u(t,w,e),e},a=function(t){return l(t,w)?t[w]:{}},i=function(t){return l(t,w)}}t.exports={set:r,get:a,has:i,enforce:function(t){return i(t)?a(t):r(t,{})},getterFor:function(t){return function(e){var n;if(!c(e)||(n=a(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}}},7659:function(t,e,n){var r=n(5112),a=n(7497),i=r("iterator"),s=Array.prototype;t.exports=function(t){return void 0!==t&&(a.Array===t||s[i]===t)}},614:function(t){t.exports=function(t){return"function"==typeof t}},4411:function(t,e,n){var r=n(7293),a=n(614),i=n(648),s=n(5005),o=n(2788),c=[],u=s("Reflect","construct"),l=/^\s*(?:class|function)\b/,h=l.exec,p=!l.exec((function(){})),d=function(t){if(!a(t))return!1;try{return u(Object,c,t),!0}catch(t){return!1}};t.exports=!u||r((function(){var t;return d(d.call)||!d(Object)||!d((function(){t=!0}))||t}))?function(t){if(!a(t))return!1;switch(i(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return p||!!h.call(l,o(t))}:d},4705:function(t,e,n){var r=n(7293),a=n(614),i=/#|\.prototype\./,s=function(t,e){var n=c[o(t)];return n==l||n!=u&&(a(e)?r(e):!!e)},o=s.normalize=function(t){return String(t).replace(i,".").toLowerCase()},c=s.data={},u=s.NATIVE="N",l=s.POLYFILL="P";t.exports=s},111:function(t,e,n){var r=n(614);t.exports=function(t){return"object"==typeof t?null!==t:r(t)}},1913:function(t){t.exports=!1},2190:function(t,e,n){var r=n(614),a=n(5005),i=n(3307);t.exports=i?function(t){return"symbol"==typeof t}:function(t){var e=a("Symbol");return r(e)&&Object(t)instanceof e}},9212:function(t,e,n){var r=n(9670),a=n(8173);t.exports=function(t,e,n){var i,s;r(t);try{if(!(i=a(t,"return"))){if("throw"===e)throw n;return n}i=i.call(t)}catch(t){s=!0,i=t}if("throw"===e)throw n;if(s)throw i;return r(i),n}},3383:function(t,e,n){"use strict";var r,a,i,s=n(7293),o=n(614),c=n(30),u=n(9518),l=n(1320),h=n(5112),p=n(1913),d=h("iterator"),g=!1;[].keys&&("next"in(i=[].keys())?(a=u(u(i)))!==Object.prototype&&(r=a):g=!0),null==r||s((function(){var t={};return r[d].call(t)!==t}))?r={}:p&&(r=c(r)),o(r[d])||l(r,d,(function(){return this})),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:g}},7497:function(t){t.exports={}},6244:function(t,e,n){var r=n(7466);t.exports=function(t){return r(t.length)}},133:function(t,e,n){var r=n(7392),a=n(7293);t.exports=!!Object.getOwnPropertySymbols&&!a((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},8536:function(t,e,n){var r=n(7854),a=n(614),i=n(2788),s=r.WeakMap;t.exports=a(s)&&/native code/.test(i(s))},30:function(t,e,n){var r,a=n(9670),i=n(6048),s=n(748),o=n(3501),c=n(490),u=n(317),l=n(6200),h=l("IE_PROTO"),p=function(){},d=function(t){return"<script>"+t+"</"+"script>"},g=function(t){t.write(d("")),t.close();var e=t.parentWindow.Object;return t=null,e},f=function(){try{r=new ActiveXObject("htmlfile")}catch(t){}var t,e;f="undefined"!=typeof document?document.domain&&r?g(r):((e=u("iframe")).style.display="none",c.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(d("document.F=Object")),t.close(),t.F):g(r);for(var n=s.length;n--;)delete f.prototype[s[n]];return f()};o[h]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(p.prototype=a(t),n=new p,p.prototype=null,n[h]=t):n=f(),void 0===e?n:i(n,e)}},6048:function(t,e,n){var r=n(9781),a=n(3070),i=n(9670),s=n(1956);t.exports=r?Object.defineProperties:function(t,e){i(t);for(var n,r=s(e),o=r.length,c=0;o>c;)a.f(t,n=r[c++],e[n]);return t}},3070:function(t,e,n){var r=n(9781),a=n(4664),i=n(9670),s=n(4948),o=Object.defineProperty;e.f=r?o:function(t,e,n){if(i(t),e=s(e),i(n),a)try{return o(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},1236:function(t,e,n){var r=n(9781),a=n(5296),i=n(9114),s=n(5656),o=n(4948),c=n(2597),u=n(4664),l=Object.getOwnPropertyDescriptor;e.f=r?l:function(t,e){if(t=s(t),e=o(e),u)try{return l(t,e)}catch(t){}if(c(t,e))return i(!a.f.call(t,e),t[e])}},8006:function(t,e,n){var r=n(6324),a=n(748).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,a)}},5181:function(t,e){e.f=Object.getOwnPropertySymbols},9518:function(t,e,n){var r=n(2597),a=n(614),i=n(7908),s=n(6200),o=n(8544),c=s("IE_PROTO"),u=Object.prototype;t.exports=o?Object.getPrototypeOf:function(t){var e=i(t);if(r(e,c))return e[c];var n=e.constructor;return a(n)&&e instanceof n?n.prototype:e instanceof Object?u:null}},6324:function(t,e,n){var r=n(2597),a=n(5656),i=n(1318).indexOf,s=n(3501);t.exports=function(t,e){var n,o=a(t),c=0,u=[];for(n in o)!r(s,n)&&r(o,n)&&u.push(n);for(;e.length>c;)r(o,n=e[c++])&&(~i(u,n)||u.push(n));return u}},1956:function(t,e,n){var r=n(6324),a=n(748);t.exports=Object.keys||function(t){return r(t,a)}},5296:function(t,e){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,a=r&&!n.call({1:2},1);e.f=a?function(t){var e=r(this,t);return!!e&&e.enumerable}:n},7674:function(t,e,n){var r=n(9670),a=n(6077);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,i){return r(n),a(i),e?t.call(n,i):n.__proto__=i,n}}():void 0)},2140:function(t,e,n){var r=n(614),a=n(111);t.exports=function(t,e){var n,i;if("string"===e&&r(n=t.toString)&&!a(i=n.call(t)))return i;if(r(n=t.valueOf)&&!a(i=n.call(t)))return i;if("string"!==e&&r(n=t.toString)&&!a(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},3887:function(t,e,n){var r=n(5005),a=n(8006),i=n(5181),s=n(9670);t.exports=r("Reflect","ownKeys")||function(t){var e=a.f(s(t)),n=i.f;return n?e.concat(n(t)):e}},857:function(t,e,n){var r=n(7854);t.exports=r},1320:function(t,e,n){var r=n(7854),a=n(614),i=n(2597),s=n(8880),o=n(3505),c=n(2788),u=n(9909),l=n(6530).CONFIGURABLE,h=u.get,p=u.enforce,d=String(String).split("String");(t.exports=function(t,e,n,c){var u,h=!!c&&!!c.unsafe,g=!!c&&!!c.enumerable,f=!!c&&!!c.noTargetGet,b=c&&void 0!==c.name?c.name:e;a(n)&&("Symbol("===String(b).slice(0,7)&&(b="["+String(b).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!i(n,"name")||l&&n.name!==b)&&s(n,"name",b),(u=p(n)).source||(u.source=d.join("string"==typeof b?b:""))),t!==r?(h?!f&&t[e]&&(g=!0):delete t[e],g?t[e]=n:s(t,e,n)):g?t[e]=n:o(e,n)})(Function.prototype,"toString",(function(){return a(this)&&h(this).source||c(this)}))},4488:function(t){t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},3505:function(t,e,n){var r=n(7854);t.exports=function(t,e){try{Object.defineProperty(r,t,{value:e,configurable:!0,writable:!0})}catch(n){r[t]=e}return e}},8003:function(t,e,n){var r=n(3070).f,a=n(2597),i=n(5112)("toStringTag");t.exports=function(t,e,n){t&&!a(t=n?t:t.prototype,i)&&r(t,i,{configurable:!0,value:e})}},6200:function(t,e,n){var r=n(2309),a=n(9711),i=r("keys");t.exports=function(t){return i[t]||(i[t]=a(t))}},5465:function(t,e,n){var r=n(7854),a=n(3505),i="__core-js_shared__",s=r[i]||a(i,{});t.exports=s},2309:function(t,e,n){var r=n(1913),a=n(5465);(t.exports=function(t,e){return a[t]||(a[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.18.2",mode:r?"pure":"global",copyright:"Â© 2021 Denis Pushkarev (zloirock.ru)"})},8710:function(t,e,n){var r=n(9303),a=n(1340),i=n(4488),s=function(t){return function(e,n){var s,o,c=a(i(e)),u=r(n),l=c.length;return u<0||u>=l?t?"":void 0:(s=c.charCodeAt(u))<55296||s>56319||u+1===l||(o=c.charCodeAt(u+1))<56320||o>57343?t?c.charAt(u):s:t?c.slice(u,u+2):o-56320+(s-55296<<10)+65536}};t.exports={codeAt:s(!1),charAt:s(!0)}},1400:function(t,e,n){var r=n(9303),a=Math.max,i=Math.min;t.exports=function(t,e){var n=r(t);return n<0?a(n+e,0):i(n,e)}},5656:function(t,e,n){var r=n(8361),a=n(4488);t.exports=function(t){return r(a(t))}},9303:function(t){var e=Math.ceil,n=Math.floor;t.exports=function(t){var r=+t;return r!=r||0===r?0:(r>0?n:e)(r)}},7466:function(t,e,n){var r=n(9303),a=Math.min;t.exports=function(t){return t>0?a(r(t),9007199254740991):0}},7908:function(t,e,n){var r=n(4488);t.exports=function(t){return Object(r(t))}},7593:function(t,e,n){var r=n(111),a=n(2190),i=n(8173),s=n(2140),o=n(5112)("toPrimitive");t.exports=function(t,e){if(!r(t)||a(t))return t;var n,c=i(t,o);if(c){if(void 0===e&&(e="default"),n=c.call(t,e),!r(n)||a(n))return n;throw TypeError("Can't convert object to primitive value")}return void 0===e&&(e="number"),s(t,e)}},4948:function(t,e,n){var r=n(7593),a=n(2190);t.exports=function(t){var e=r(t,"string");return a(e)?e:String(e)}},1694:function(t,e,n){var r={};r[n(5112)("toStringTag")]="z",t.exports="[object z]"===String(r)},1340:function(t,e,n){var r=n(648);t.exports=function(t){if("Symbol"===r(t))throw TypeError("Cannot convert a Symbol value to a string");return String(t)}},6330:function(t){t.exports=function(t){try{return String(t)}catch(t){return"Object"}}},9711:function(t){var e=0,n=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++e+n).toString(36)}},3307:function(t,e,n){var r=n(133);t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},5112:function(t,e,n){var r=n(7854),a=n(2309),i=n(2597),s=n(9711),o=n(133),c=n(3307),u=a("wks"),l=r.Symbol,h=c?l:l&&l.withoutSetter||s;t.exports=function(t){return i(u,t)&&(o||"string"==typeof u[t])||(o&&i(l,t)?u[t]=l[t]:u[t]=h("Symbol."+t)),u[t]}},1038:function(t,e,n){var r=n(2109),a=n(8457);r({target:"Array",stat:!0,forced:!n(7072)((function(t){Array.from(t)}))},{from:a})},8783:function(t,e,n){"use strict";var r=n(8710).charAt,a=n(1340),i=n(9909),s=n(654),o="String Iterator",c=i.set,u=i.getterFor(o);s(String,"String",(function(t){c(this,{type:o,string:a(t),index:0})}),(function(){var t,e=u(this),n=e.string,a=e.index;return a>=n.length?{value:void 0,done:!0}:(t=r(n,a),e.index+=t.length,{value:t,done:!1})}))}},e={};function n(r){var a=e[r];if(void 0!==a)return a.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,n),i.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),function(){"use strict";n(4370);function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}var e=function(){function e(){}return e.extend=function(){for(var e=1;e<arguments.length;e++)for(var n in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],n)&&("object"===t(arguments[0][n])&&"object"===t(arguments[e][n])?this.extend(arguments[0][n],arguments[e][n]):arguments[0][n]=arguments[e][n]);return arguments[0]},e.htmlDecode=function(t){return(new DOMParser).parseFromString(t,"text/html").documentElement.textContent},e.stripHTML=function(t){var e=document.createElement("div");return e.innerHTML=t,e.textContent||e.innerText||""},e.createArray=function(t){var n=new Array(t||0),r=t;if(arguments.length>1)for(var a=Array.prototype.slice.call(arguments,1);r--;)n[t-1-r]=e.createArray.apply(this,a);return n},e.swapDOMElements=function(t,e){var n=t.parentNode,r=e.parentNode;if(n&&r){var a=document.createElement("div"),i=document.createElement("div");n.replaceChild(a,t),r.replaceChild(i,e),n.replaceChild(e,a),r.replaceChild(t,i)}},e.shuffleDOMElements=function(t){for(var n=t.length-1;n>0;n--){var r=Math.floor(Math.random()*(n+1));n!==r&&e.swapDOMElements(t[n],t[r])}},e.formatLanguageCode=function(t){if("string"!=typeof t)return t;var e=t.split("-");return e[0]=e[0].toLowerCase(),e.length>1&&(e[1]=e[1].toUpperCase()),t=e.join("-")},e}(),r=e,a=function(){function t(t,e){var n=this;this.params=r.extend({a11y:{active:"",disabled:"",inactive:""},active:!1,classes:[],disabled:!1,type:"pulse"},t||{}),Array.isArray(this.params.classes)||(this.params.classes=[this.params.classes]),"pulse"===this.params.type&&(this.params.a11y.inactive||(this.params.a11y.inactive=this.params.a11y.active||""),this.params.a11y.active||(this.params.a11y.active=this.params.a11y.inactive||"")),this.active=this.params.active,this.disabled=this.params.disabled,this.callbacks=e||{},this.callbacks.onClick=this.callbacks.onClick||function(){},this.button=document.createElement("button"),this.params.classes&&this.params.classes.forEach((function(t){n.button.classList.add(t)})),this.button.setAttribute("aria-pressed",this.params.active),this.button.setAttribute("tabindex","-1"),!0===this.params.active?this.activate():this.deactivate(),!0===this.params.disabled?this.disable():this.enable(),this.button.addEventListener("mouseup",(function(t){n.disabled||("toggle"===n.params.type&&n.toggle(),setTimeout((function(){n.callbacks.onClick(t)}),100))}))}var e=t.prototype;return e.getDOM=function(){return this.button},e.show=function(){this.button.classList.remove("h5p-sort-paragraphs-no-display")},e.hide=function(){this.button.classList.add("h5p-sort-paragraphs-no-display")},e.enable=function(){this.disabled=!1,this.button.classList.remove("h5p-sort-paragraphs-disabled"),this.active?this.activate():this.deactivate()},e.disable=function(){this.button.classList.add("h5p-sort-paragraphs-disabled"),this.button.setAttribute("aria-label",this.params.a11y.disabled),this.button.setAttribute("title",this.params.a11y.disabled),this.disabled=!0},e.activate=function(){this.disabled||("toggle"===this.params.type&&(this.button.classList.add("h5p-sort-paragraphs-button-active"),this.button.setAttribute("aria-pressed",!0)),this.button.setAttribute("aria-label",this.params.a11y.active),this.button.setAttribute("title",this.params.a11y.active),this.active=!0)},e.deactivate=function(){this.disabled||(this.active=!1,"toggle"===this.params.type&&(this.button.classList.remove("h5p-sort-paragraphs-active"),this.button.setAttribute("aria-pressed",!1)),this.button.setAttribute("aria-label",this.params.a11y.inactive),this.button.setAttribute("title",this.params.a11y.inactive))},e.toggle=function(){this.disabled||(this.active?this.deactivate():this.activate())},e.isActive=function(){return this.active},e.isDisabled=function(){return this.disabled},t}(),i=function(){function t(t,e){this.params=t,this.callbacks=r.extend({onMoveUp:function(){},onMoveDown:function(){},onFocusOut:function(){},onMouseDown:function(){},onMouseUp:function(){},onDragStart:function(){},onDragEnter:function(){},onDragLeave:function(){},onDragEnd:function(){},onKeyboardUp:function(){},onKeyboardDown:function(){},onKeyboardSelect:function(){},onKeyboardCancel:function(){}},e),this.selected=!1,this.shown=!0,this.buttons=[],this.content=this.buildParagraph(this.params.text,this.params.l10n),this.placeholder=document.createElement("div"),this.placeholder.classList.add("h5p-sort-paragraphs-paragraph-placeholder"),this.placeholder.addEventListener("dragover",(function(t){t.preventDefault()})),this.placeholder.addEventListener("drop",(function(t){t.preventDefault()}))}var e=t.prototype;return e.getDOM=function(){return this.content},e.buildParagraph=function(){var t,e,n,r,a=document.createElement("div");a.classList.add("h5p-sort-paragraphs-paragraph"),a.setAttribute("role","listitem"),a.setAttribute("draggable",!0),this.containerText=this.buildDIVContainer({classText:"h5p-sort-paragraphs-paragraph-container",innerHTML:this.params.text}),a.appendChild(this.containerText);var i=this.buildDIVContainer({classText:"h5p-sort-paragraphs-paragraph-button-container",attributes:{"aria-hidden":"true"}});a.appendChild(i),null!==(t=this.params)&&void 0!==t&&null!==(e=t.options)&&void 0!==e&&e.addButtonsForMovement&&(this.buttons.up=this.buildButtonUp(),i.appendChild(this.buttons.up.getDOM()));var s=this.buildDIVContainer({classText:"h5p-sort-paragraphs-paragraph-button-container",attributes:{"aria-hidden":"true"}});return a.appendChild(s),this.containerCorrections=this.buildDIVContainer({classText:"h5p-sort-paragraphs-paragraph-corrections"}),s.appendChild(this.containerCorrections),null!==(n=this.params)&&void 0!==n&&null!==(r=n.options)&&void 0!==r&&r.addButtonsForMovement&&(this.buttons.down=this.buildButtonDown(),s.appendChild(this.buttons.down.getDOM())),this.scoreExplanations=this.buildDIVContainer({classText:"h5p-sort-paragraphs-paragraph-score-explanations"}),s.appendChild(this.scoreExplanations),this.addKeyboardHandlers(a),this.addDragHandlers(a),a},e.buildDIVContainer=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=document.createElement("div");if(t.classText&&e.classList.add(t.classText),t.innerHTML&&(e.innerHTML=t.innerHTML),t.attributes)for(var n in t.attributes)e.setAttribute(n,t.attributes[n]);return e},e.buildButtonUp=function(){var t=this;return new a({a11y:{active:this.params.l10n.up,disabled:this.params.l10n.disabled},classes:["h5p-sort-paragraphs-button","h5p-sort-paragraphs-paragraph-button-up"]},{onClick:function(){t.callbacks.onMoveUp(t.content)}})},e.buildButtonDown=function(){var t=this;return new a({a11y:{active:this.params.l10n.down,disabled:this.params.l10n.disabled},classes:["h5p-sort-paragraphs-button","h5p-sort-paragraphs-paragraph-button-down"]},{onClick:function(){t.callbacks.onMoveDown(t.content)}})},e.addKeyboardHandlers=function(t){var e=this;t.addEventListener("keydown",(function(t){switch(t.code){case"ArrowUp":if(t.preventDefault(),t.currentTarget===t.currentTarget.parentNode.firstChild)return;e.callbacks.onKeyboardUp(t.currentTarget);break;case"ArrowDown":if(t.preventDefault(),t.currentTarget===t.currentTarget.parentNode.lastChild)return;e.callbacks.onKeyboardDown(t.currentTarget);break;case"Enter":case"Space":if(e.disabled)return;e.callbacks.onKeyboardSelect(t.currentTarget);break;case"Escape":if(e.disabled)return;e.callbacks.onKeyboardCancel(t.currentTarget)}}))},e.addDragHandlers=function(t){var e=this;t.addEventListener("mousedown",(function(t){e.handleMouseUpDown(t,"onMouseDown")})),t.addEventListener("mouseup",(function(t){e.handleMouseUpDown(t,"onMouseUp")})),t.addEventListener("focusout",(function(t){e.toggleEffect("selected",!1),e.callbacks.onFocusOut(t.currentTarget)})),t.addEventListener("dragstart",(function(t){e.handleDragStart(t)})),t.addEventListener("dragover",(function(t){e.handleDragOver(t)})),t.addEventListener("dragenter",(function(t){e.handleDragEnter(t)})),t.addEventListener("dragleave",(function(t){e.handleDragLeave(t)})),t.addEventListener("dragend",(function(t){e.handleDragEnd(t)})),t.addEventListener("touchstart",(function(n){n.cancelable&&!e.disabled&&t.setAttribute("draggable",!1)})),t.addEventListener("touchend",(function(){e.disabled||t.setAttribute("draggable",!0)}))},e.showPlaceholder=function(){this.isShown()&&(this.placeholder.style.width="".concat(this.content.offsetWidth,"px"),this.placeholder.style.height="".concat(this.content.offsetHeight,"px"),this.attachPlaceholder())},e.attachPlaceholder=function(){this.content.parentNode.insertBefore(this.placeholder,this.content.nextSibling)},e.hidePlaceholder=function(){this.placeholder.parentNode&&this.placeholder.parentNode.removeChild(this.placeholder)},e.show=function(){this.content.classList.remove("h5p-sort-paragraphs-no-display"),this.shown=!0},e.hide=function(){this.content.classList.add("h5p-sort-paragraphs-no-display"),this.shown=!1},e.isShown=function(){return this.shown},e.isSelected=function(){return this.selected},e.select=function(){this.selected=!0,this.toggleEffect("selected",!0)},e.unselect=function(){this.selected=!1,this.toggleEffect("selected",!1)},e.enable=function(){for(var t in this.content.setAttribute("draggable",!0),this.toggleEffect("disabled",!1),this.buttons)this.buttons[t].enable();this.disabled=!1},e.disable=function(){for(var t in this.disabled=!0,this.content.setAttribute("draggable",!1),this.toggleEffect("disabled",!0),this.buttons)this.buttons[t].disable()},e.focus=function(){this.content.focus()},e.getText=function(){return this.containerText.innerHTML},e.setText=function(t){"string"==typeof t&&(this.containerText.innerHTML=t)},e.setTabIndex=function(t){"number"==typeof t&&this.content.setAttribute("tabIndex",t)},e.reset=function(){this.content.classList.remove("disabled"),this.content.classList.remove("solution"),this.unselect()},e.resetDragging=function(){clearTimeout(this.placeholderTimeout),this.hidePlaceholder(),this.show(),this.showButtons(),this.toggleEffect("over",!1)},e.showButtons=function(){for(var t in this.buttons)this.buttons[t].show()},e.hideButtons=function(){for(var t in this.buttons)this.buttons[t].hide()},e.toggleButton=function(t,e){t&&this.buttons[t]&&"boolean"==typeof e&&(e?this.buttons[t].enable():this.buttons[t].disable())},e.toggleEffect=function(t,e){"boolean"==typeof e&&-1!==["over","ghosted","disabled","selected","correct","wrong","solution"].indexOf(t)&&(e?this.content.classList.add("h5p-sort-paragraphs-".concat(t)):this.content.classList.remove("h5p-sort-paragraphs-".concat(t)))},e.translate=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"number"==typeof e.x||"number"==typeof e.y?(this.content.classList.add("animate-translation"),setTimeout((function(){t.content.style.transform="translate(".concat(e.x||0,"px, ").concat(e.y||0,"px)")}),0)):(this.content.classList.remove("animate-translation"),this.content.style.transform="")},e.setAriaLabel=function(t){this.content.setAttribute("aria-label",t)},e.showScoreExplanation=function(t){this.scoreExplanations.appendChild(t)},e.hideScoreExplanation=function(){this.scoreExplanations.innerHTML=""},e.handleMouseUpDown=function(t,e){this.disabled||("onMouseDown"===e&&(this.pointerPosition={x:t.clientX,y:t.clientY}),!this.params.options.addButtonsForMovement||t.target!==this.buttons.up.getDOM()&&t.target!==this.buttons.down.getDOM()?this.callbacks[e](t.currentTarget):this.content.setAttribute("draggable",!0))},e.handleDragStart=function(t){var e=this;this.disabled||(this.hideButtons(),this.toggleEffect("over",!0),t.dataTransfer.effectAllowed="move",t.dataTransfer.setDragImage(this.content,this.pointerPosition.x-this.content.getBoundingClientRect().left,this.pointerPosition.y-this.content.getBoundingClientRect().top),clearTimeout(this.placeholderTimeout),this.placeholderTimeout=setTimeout((function(){e.showPlaceholder(),e.hide()}),0),this.callbacks.onDragStart(t.currentTarget))},e.handleDragOver=function(t){this.disabled||t.preventDefault()},e.handleDragEnter=function(t){this.disabled||this.callbacks.onDragEnter(t.currentTarget)},e.handleDragLeave=function(t){this.disabled||this.content!==t.target||this.content.contains(t.fromElement)||this.callbacks.onDragLeave(t.currentTarget)},e.handleDragEnd=function(t){this.disabled||(this.resetDragging(),this.callbacks.onDragEnd(t.currentTarget))},t}(),s=function(){function t(){this.content=this.buildSeparator()}var e=t.prototype;return e.getDOM=function(){return this.content},e.buildSeparator=function(){var t=document.createElement("div");return t.classList.add("h5p-sort-paragraphs-separator"),t},e.show=function(){this.content.classList.remove("h5p-sort-paragraphs-no-display")},e.hide=function(){this.content.classList.add("h5p-sort-paragraphs-no-display")},e.toggleEffect=function(t,e){"boolean"==typeof e&&-1!==["correct","wrong"].indexOf(t)&&(e?this.content.classList.add("h5p-sort-paragraphs-".concat(t)):this.content.classList.remove("h5p-sort-paragraphs-".concat(t)))},e.setAriaLabel=function(t){this.content.setAttribute("aria-label",t)},e.showScoreExplanation=function(t){this.content.classList.contains("h5p-question-plus-one")||this.content.classList.contains("h5p-question-minus-one")||this.content.appendChild(t)},e.hideScoreExplanation=function(){var t=this.content.querySelector(".h5p-question-plus-one, .h5p-question-minus.one");t&&this.content.removeChild(t)},t}(),o=function(){function t(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.params=e,this.callbacks=r.extend({onInteracted:function(){},read:function(){}},n),this.content=document.createElement("div"),this.content.classList.add("h5p-sort-paragraphs-content"),this.draggedElement=null,this.answerGiven=!1,this.enabled=!0,this.oldOrder=null,this.selectedDraggable=null,this.isMouseDownOnDraggable=!1,this.handleSwapTransitionEnded=this.handleSwapTransitionEnded.bind(this),this.handleSwapSolutionEnded=this.handleSwapSolutionEnded.bind(this),this.options={scoringMode:e.scoringMode||"transitions",penalties:"boolean"!=typeof e.penalties||e.penalties,duplicatesInterchangeable:e.duplicatesInterchangeable},this.ariaTemplates=this.buildAriaTemplates(),this.paragraphs=e.paragraphs.map((function(e){return t.buildParagraph(e)})),this.separators=[],e.paragraphs.forEach((function(n,r){r!==e.paragraphs.length-2&&t.separators.push(new s)})),this.list=this.buildList(this.paragraphs),this.content.appendChild(this.list),e.previousState&&e.previousState.order?this.reorderDraggables(e.previousState.order):r.shuffleDOMElements(this.paragraphs.map((function(t){return t.getDOM()}))),this.resetAriaLabels(),this.resetDraggablesTabIndex(),this.resetDraggables()}var e=t.prototype;return e.reorderDraggables=function(t){for(var e,n=0;n<t.length;n++){e=this.getDraggables();var a=this.getDraggablesOrder();a[n]!==t[n]&&r.swapDOMElements(e[n],e[a.indexOf(t[n])])}},e.getDOM=function(){return this.content},e.showResults=function(){var t=this,e=this.computeResults();this.list.setAttribute("aria-label",this.params.a11y.listDescriptionCheckAnswer),this.paragraphs.forEach((function(t){t.hideButtons(),t.disable()})),"positions"===this.options.scoringMode?(this.showScoreExplanation(this.getDraggables().map((function(e){return t.getParagraph(e)})),e),this.addScoreAria(this.getDraggables(),e)):"transitions"===this.options.scoringMode&&(this.showScoreExplanation(this.separators,e),this.addScoreAria(this.getDraggables(),e),this.setAriaLabel(this.getDraggables().pop(),{action:"neutral"})),this.resetDraggablesTabIndex()},e.hideResults=function(){this.paragraphs.concat(this.separators).forEach((function(t){t.toggleEffect("correct",!1),t.toggleEffect("wrong",!1),t.setAriaLabel(""),t.hideScoreExplanation()}))},e.showSolutions=function(){var t=this;this.hideResults(),this.list.setAttribute("aria-label",this.params.a11y.listDescriptionShowSolution),this.paragraphs.forEach((function(t){t.toggleEffect("solution",!0)})),this.paragraphs[this.paragraphs.length-1].getDOM().addEventListener("transitionend",this.handleSwapSolutionEnded);var e=this.getDraggables(),n=e[0].offsetTop;e.forEach((function(r,a){a>0&&(n+=t.paragraphs[a-1].getDOM().offsetHeight+r.offsetTop-e[a-1].offsetTop-e[a-1].offsetHeight),t.paragraphs[a].translate({y:n-t.paragraphs[a].getDOM().offsetTop})}))},e.handleSwapSolutionEnded=function(){var t=this;this.paragraphs[this.paragraphs.length-1].getDOM().removeEventListener("transitionend",this.handleSwapSolutionEnded),this.paragraphs.forEach((function(e,n){e.translate();var a=t.getDraggables(),i=a.indexOf(e.getDOM());i!==n&&r.swapDOMElements(a[n],a[i])})),this.resetAriaLabels(),this.resetDraggablesTabIndex(),this.getDraggables().forEach((function(e){t.setAriaLabel(e,{action:"solution"})}))},e.addScoreAria=function(t,e){var n=this;e.correctAnswers.forEach((function(e,r){var a=t[r],i=n.options.penalties&&"positions"===n.options.scoringMode,s={action:"positions"===n.options.scoringMode?"resultPositions":"resultTransitions",result:!0===e?n.params.a11y.correct:n.params.a11y.wrong,points:!0===e?n.params.a11y.point.replace("@score",1):i?n.params.a11y.point.replace("@score",-1):void 0};n.setAriaLabel(a,s)}))},e.showScoreExplanation=function(t,e){var n=this;this.scorePoints=this.scorePoints||new H5P.Question.ScorePoints,e.correctAnswers.forEach((function(e,r){var a=t[r];!0===e?(a.toggleEffect("correct",!0),a.showScoreExplanation(n.scorePoints.getElement(!0))):(a.toggleEffect("wrong",!0),n.options.penalties&&"positions"===n.options.scoringMode&&a.showScoreExplanation(n.scorePoints.getElement(!1)))}))},e.computeResults=function(){var t,e=this,n=0,a=this.getDraggables(),i=this.paragraphs.map((function(t){return t.getDOM()})),s=a.map((function(t){return i.indexOf(t)}));return"positions"===this.options.scoringMode?(t=r.createArray(this.paragraphs.length),n=s.reduce((function(n,r,s){var o=r===s||e.options.duplicatesInterchangeable&&a[s].innerText===i[s].innerText;return t[s]=o,n+=o?1:0,n+=!o&&e.options.penalties?-1:0}),0)):"transitions"===this.options.scoringMode&&function(){t=r.createArray(e.paragraphs.length-1);for(var o=a.map((function(t){return t.innerText})),c=i.map((function(t){return t.innerText})),u=function(r){var a=[o[r],o[r+1]],i=c.reduce((function(t,e,n){return!0===t||n!==c.length-1&&(e===a[0]&&c[n+1]===a[1])}),!1);e.options.duplicatesInterchangeable&&i||s[r]===s[r+1]-1?(t[r]=!0,n++):t[r]=!1},l=0;l<s.length-1;l++)u(l)}(),{correctAnswers:t,score:Math.max(0,n)}},e.buildList=function(t){var e=this,n=document.createElement("div");return n.setAttribute("role","list"),n.setAttribute("aria-label",this.params.a11y.listDescription),n.classList.add("h5p-sort-paragraphs-list"),t.forEach((function(r,a){n.appendChild(r.getDOM()),a!==t.length-1&&n.appendChild(e.separators[a].getDOM())})),n},e.buildParagraph=function(t){var e=this;return new i({text:t,l10n:this.params.l10n,options:{addButtonsForMovement:this.params.addButtonsForMovement}},{onMoveUp:function(t){return e.handleDraggableMoved(t,"up")},onMoveDown:function(t){return e.handleDraggableMoved(t,"down")},onFocusOut:function(t){return e.handleDraggableFocusOut(t)},onDragStart:function(t){return e.handleDraggableDragStart(t)},onDragEnter:function(t){return e.handleDraggableDragEnter(t)},onDragLeave:function(t){return e.handleDraggableDragLeave(t)},onDragEnd:function(t){return e.handleDraggableDragEnd(t)},onKeyboardUp:function(t){return e.handleDraggableKeyboardMoved(t,"up")},onKeyboardDown:function(t){return e.handleDraggableKeyboardMoved(t,"down")},onKeyboardSelect:function(t){return e.handleDraggableKeyboardSelect(t)},onKeyboardCancel:function(t){return e.handleDraggableKeyboardCancel(t)},onMouseDown:function(t){return e.handleDraggableMouseDown(t)},onMouseUp:function(t){return e.handleDraggableMouseUp(t)}})},e.buildAriaTemplates=function(){return{selected:"".concat(this.params.a11y.paragraph," ").concat(this.params.a11y.sevenOfNine,". ").concat(this.isAnswerGiven()?"":this.params.a11y.instructionsSelected+". ","@text"),grabbed:"".concat(this.params.a11y.paragraph," ").concat(this.params.a11y.grabbed,". ").concat(this.params.a11y.currentPosition,": ").concat(this.params.a11y.sevenOfNine,". ").concat(this.isAnswerGiven()?"":this.params.a11y.instructionsGrabbed+"."),moved:"".concat(this.params.a11y.paragraph," ").concat(this.params.a11y.moved,". ").concat(this.params.a11y.currentPosition,": ").concat(this.params.a11y.sevenOfNine,"."),dropped:"".concat(this.params.a11y.paragraph," ").concat(this.params.a11y.dropped,". ").concat(this.params.a11y.finalPosition,": ").concat(this.params.a11y.sevenOfNine,"."),cancelled:"".concat(this.params.a11y.reorderCancelled,". ").concat(this.params.a11y.paragraph," ").concat(this.params.a11y.sevenOfNine,". ").concat(this.isAnswerGiven()?"":this.params.a11y.instructionsSelected+". ","@text"),resultPositions:"".concat(this.params.a11y.paragraph," ").concat(this.params.a11y.sevenOfNine,". @result. @points. @text"),resultTransitions:"".concat(this.params.a11y.paragraph," ").concat(this.params.a11y.sevenOfNine,". ").concat(this.params.a11y.nextParagraph," @result. @points. @text"),neutral:"".concat(this.params.a11y.paragraph," ").concat(this.params.a11y.sevenOfNine,". @text"),solution:"".concat(this.params.a11y.correctParagraph," ").concat(this.params.a11y.sevenOfNine,". @text")}},e.handleDraggableMoved=function(t,e){var n,r=this,a=this.getDraggableIndex(t);"up"===e&&a>0?n=a-1:"down"===e&&a<this.paragraphs.length&&(n=a+1),void 0!==n&&(this.handleInteracted(),this.swapDOMElements(t,this.getDraggableAt(n),(function(){r.resetDraggablesTabIndex(),r.resetDraggables(),r.resetAriaLabels()})))},e.handleDraggableFocusOut=function(t){this.getParagraph(t).unselect(),this.resetAriaLabels(),this.isMouseDownOnDraggable||(this.selectedDraggable=null)},e.handleDraggableDragStart=function(t){var e=this;this.oldOrder=this.getDraggablesOrder(),this.draggedElement=t,this.getDraggables().forEach((function(t){e.getParagraph(t).hideButtons()}))},e.handleDraggableDragEnter=function(t){this.dropzoneElement&&this.dropzoneElement===t||(this.dropzoneElement=t,this.dropzoneElement&&this.draggedElement&&this.draggedElement!==this.dropzoneElement&&(r.swapDOMElements(this.draggedElement,this.dropzoneElement),this.getParagraph(this.draggedElement).attachPlaceholder()))},e.handleDraggableDragLeave=function(){this.dropzoneElement=null},e.handleDraggableDragEnd=function(){var t=this,e=this.getDraggablesOrder();this.oldOrder.some((function(t,n){return t!==e[n]}))&&this.handleInteracted(),this.getDraggables().forEach((function(e){t.getParagraph(e).showButtons()})),this.resetDraggables(),this.draggedElement.focus(),this.selectedDraggable=null,this.draggedElement=null,this.dropzoneElement=null,this.oldOrder=null},e.handleDraggableKeyboardMoved=function(t,e){var n=this.getDraggableIndex(t);if(!("up"===e&&n<=0||"down"===e&&n>=this.paragraphs.length-1||"up"!==e&&"down"!==e)){var a=n+("up"===e?-1:1),i=this.getDraggables()[a],s=this.getParagraph(t),o=this.getParagraph(i);s.isSelected()?(r.swapDOMElements(t,i),this.resetDraggables(),this.resetAriaLabels(),this.setAriaLabel(t,{action:"moved"}),t.focus(),s.select()):(s.setTabIndex(-1),o.setTabIndex(0),o.focus())}},e.handleDraggableKeyboardSelect=function(t){var e=this.getParagraph(t);e.isSelected()?(this.undoState&&this.undoState.position!==this.getDraggableIndex(t)&&this.handleInteracted(),this.setAriaLabel(t,{action:"dropped"}),e.unselect(),this.selectedDraggable=null,this.undoState=null):(this.setAriaLabel(t,{action:"grabbed"}),e.select(),this.selectedDraggable=t,this.undoState={position:this.getDraggableIndex(t),order:this.getDraggablesOrder()})},e.handleDraggableKeyboardCancel=function(t){var e=this.getParagraph(t);if(e.unselect(),this.resetAriaLabels(),this.undoState){this.reorderDraggables(this.undoState.order),e.setTabIndex(-1);var n=this.getDraggableAt(this.undoState.position);n.setAttribute("tabIndex",0),n.focus(),this.resetDraggables(),this.resetAriaLabels(),this.setAriaLabel(n,{action:"cancelled"}),this.undoState=null}},e.handleDraggableMouseDown=function(t){this.isMouseDownOnDraggable=!0,this.getParagraph(t).toggleEffect("selected",!0)},e.handleDraggableMouseUp=function(t){var e=this,n=this.getParagraph(t);if(n.isSelected())this.selectedDraggable=null,this.setAriaLabel(t,{action:"dropped"}),n.unselect();else if(null!==this.selectedDraggable&&this.selectedDraggable!==t){this.handleInteracted();var r=this.selectedDraggable;this.swapDOMElements(t,r,(function(){e.resetDraggables(),e.resetAriaLabels(),e.setAriaLabel(r,{action:"dropped"}),r.focus(),e.selectedDraggable=null}))}else this.setAriaLabel(t,{action:"grabbed"}),n.select(),this.selectedDraggable=t;this.isMouseDownOnDraggable=!1},e.handleInteracted=function(){this.answerGiven=!0,this.ariaTemplates=this.buildAriaTemplates(),this.callbacks.onInteracted()},e.enable=function(){this.paragraphs.forEach((function(t){t.enable()})),this.enabled=!0},e.disable=function(){this.enabled=!1,this.paragraphs.forEach((function(t){t.disable()}))},e.isAnswerGiven=function(){return this.answerGiven},e.getDraggableAt=function(t){return"number"!=typeof t||t<0||t>this.paragraphs.length-1?null:this.getDraggables()[t]},e.getDraggablesOrder=function(){var t=this;return this.getDraggables().map((function(e){return t.paragraphs.indexOf(t.getParagraph(e))}))},e.getDraggableIndex=function(t){return this.getDraggables().indexOf(t)},e.getDraggables=function(){return Array.from(this.list.querySelectorAll(".h5p-sort-paragraphs-paragraph"))},e.getParagraph=function(t){return this.paragraphs.reduce((function(e,n){return null!==e?e:n.getDOM()===t?n:null}),null)},e.setAriaLabel=function(t,e){var n=this.getDraggableIndex(t)+1,a=this.paragraphs.length,i=this.getParagraph(t),s=i.getText(),o=this.ariaTemplates[e.action];"."!==(o=o.replace("@current",n).replace("@total",a).replace("@text",s).replace("@result",e.result||"").replace("@points.",e.points?"".concat(e.points,". "):"")).substr(-1)&&(o="".concat(o,".")),i.setAriaLabel(r.stripHTML(o)),-1!==["grabbed","dropped"].indexOf(e.action)&&this.callbacks.read(r.stripHTML(o))},e.resetAriaLabels=function(){var t=this;this.enabled&&(this.previousAnswerState!==this.isAnswerGiven()&&(this.previousAnswerState=this.isAnswerGiven(),this.ariaTemplates=this.buildAriaTemplates()),this.getDraggables().forEach((function(e){t.setAriaLabel(e,{action:"selected"})})))},e.resetDraggablesTabIndex=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=this.getDraggables();n.forEach((function(n,r){var a=t.getParagraph(n);0===r?a.setTabIndex(null!==e?e:0):a.setTabIndex(null!==e?e:-1)}))},e.resetDraggables=function(){var t=this,e=this.getDraggables();e.forEach((function(n,r){var a=t.getParagraph(n);a.toggleEffect("over",!1),a.toggleEffect("ghosted",!1),0===r?(a.toggleButton("up",!1),a.toggleButton("down",!0)):r===e.length-1?(a.toggleButton("up",!0),a.toggleButton("down",!1)):(a.toggleButton("up",!0),a.toggleButton("down",!0))}))},e.swapDOMElements=function(t,e,n){var r=this;if(t&&t.parentNode&&e&&e.parentNode){if(t.offsetTop-e.offsetTop>0){var a=t;t=e,e=a}this.transitionElement1=t,this.transitionElement2=e,this.transitionElements=this.getDraggables(),this.transitionDone=n,this.transitionElements.forEach((function(t){var e=r.getParagraph(t);e.hideButtons(),e.unselect()})),this.transitionElement1.addEventListener("transitionend",this.handleSwapTransitionEnded),setTimeout((function(){r.transitionElements.forEach((function(n){var a,i=r.getParagraph(n);a=n===r.transitionElement1?-1*(r.transitionElement1.offsetTop-r.transitionElement2.offsetTop-r.transitionElement2.offsetHeight+r.transitionElement1.offsetHeight):n===r.transitionElement2?-1*(r.transitionElement2.offsetTop-r.transitionElement1.offsetTop):n.offsetTop<t.offsetTop||n.offsetTop>e.offsetTop?0:r.transitionElement2.offsetHeight-r.transitionElement1.offsetHeight,i.translate({y:a}),i.disable()}))}),0)}},e.handleSwapTransitionEnded=function(){var t=this;r.swapDOMElements(this.transitionElement1,this.transitionElement2),this.getDraggables().forEach((function(e){e.removeEventListener("transitionend",t.handleSwapTransitionEnded),t.getParagraph(e).translate(),"task"===t.viewState&&(t.getParagraph(e).showButtons(),t.getParagraph(e).enable())})),this.transitionDone()},e.reset=function(){this.list.setAttribute("aria-label",this.params.a11y.listDescription),this.answerGiven=!1,this.ariaTemplates=this.buildAriaTemplates(),this.hideResults(),this.paragraphs.forEach((function(t){t.toggleEffect("correct",!1),t.toggleEffect("wrong",!1),t.toggleEffect("solution",!1),t.showButtons()})),r.shuffleDOMElements(this.paragraphs.map((function(t){return t.getDOM()}))),this.enable(),this.resetDraggablesTabIndex(),this.resetDraggables(),this.resetAriaLabels()},e.setViewState=function(t,e){var n=this;e.forEach((function(t){n.content.classList.remove("h5p-sort-paragraphs-view-state-".concat(t))})),this.viewState=t,this.content.classList.add("h5p-sort-paragraphs-view-state-".concat(t))},t}();function c(t,e){return c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},c(t,e)}var u=function(t){var e,n;function a(e,n){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(var s in(a=t.call(this,"sort-paragraphs")||this).params=r.extend({media:{},taskDescription:null,paragraphs:[],behaviour:{duplicatesInterchangeable:!0,enableSolutionsButton:!0,enableRetry:!0,scoringMode:"transitions",applyPenalties:!0,addButtonsForMovement:!0},l10n:{checkAnswer:"Check answer",submitAnswer:"Submit",showSolution:"Show solution",tryAgain:"Retry",up:"Up",down:"Down",disabled:"Disabled"},a11y:{check:"Check the answers. The responses will be marked as correct or incorrect.",showSolution:"Show the solution. The correct solution will be displayed.",retry:"Retry the task. Reset all elements and start the task over again.",listDescription:"Sortable list of paragraphs.",listDescriptionCheckAnswer:"List of paragraphs with results.",listDescriptionShowSolution:"List of paragraphs with solutions.",paragraph:"Paragraph",sevenOfNine:"@current of @total",instructionsSelected:"Press spacebar to reorder",grabbed:"grabbed",currentPosition:"Current position in list",instructionsGrabbed:"Press up and down arrow keys to change position, spacebar to drop, escape to cancel",moved:"moved",dropped:"dropped",finalPosition:"Final position",reorderCancelled:"Reorder cancelled",correct:"correct",wrong:"wrong",point:"@score point",nextParagraph:"Next paragraph",correctParagraph:"Correct paragraph at position"}},e),a.contentId=n,a.extras=i,a.params.l10n)a.params.l10n[s]=r.stripHTML(r.htmlDecode(a.params.l10n[s]));var o=i&&i.metadata&&i.metadata.defaultLanguage||"en";return a.languageTag=r.formatLanguageCode(o),a.previousState=a.extras.previousState&&a.extras.previousState.order?a.extras.previousState:null,a}n=t,(e=a).prototype=Object.create(n.prototype),e.prototype.constructor=e,c(e,n);var i=a.prototype;return i.registerDomElements=function(){var t=this,e=this.params.media.type;if(e&&e.library){var n=e.library.split(" ")[0];"H5P.Image"===n?e.params.file&&this.setImage(e.params.file.path,{disableImageZooming:this.params.media.disableImageZooming,alt:e.params.alt,title:e.params.title}):"H5P.Video"===n?e.params.sources&&this.setVideo(e):"H5P.Audio"===n&&e.params.files&&this.setAudio(e)}if(this.params.taskDescription){var r=document.createElement("div");r.classList.add("h5p-sort-paragraphs-task-description"),r.innerHTML=this.params.taskDescription,this.setIntroduction(r)}this.content=new o({paragraphs:this.params.paragraphs,addButtonsForMovement:this.params.behaviour.addButtonsForMovement,duplicatesInterchangeable:this.params.behaviour.duplicatesInterchangeable,penalties:this.params.behaviour.applyPenalties,scoringMode:this.params.behaviour.scoringMode,previousState:this.previousState,a11y:this.params.a11y,l10n:{up:this.params.l10n.up,down:this.params.l10n.down,disabled:this.params.l10n.disabled}},{onInteracted:function(){t.handleInteracted()},read:function(e){t.read(e)}}),this.setViewState("task"),this.setContent(this.content.getDOM()),null===this.previousState||"results"!==this.previousState.view&&"solutions"!==this.previousState.view||H5P.externalDispatcher.on("initialized",(function(){t.setViewState("results"),t.checkAnswer()})),this.addButtons(),this.trigger("resize")},i.addButtons=function(){var t=this;this.addButton("check-answer",this.params.l10n.checkAnswer,(function(){t.checkAnswer()}),!0,{"aria-label":this.params.a11y.check},{contentData:this.extras,textIfSubmitting:this.params.l10n.submitAnswer}),this.addButton("show-solution",this.params.l10n.showSolution,(function(){t.hideButton("show-solution"),t.showSolutions()}),!1,{"aria-label":this.params.a11y.showSolution},{}),this.addButton("try-again",this.params.l10n.tryAgain,(function(){t.showButton("check-answer"),t.hideButton("show-solution"),t.hideButton("try-again"),t.resetTask(),t.trigger("resize")}),!1,{"aria-label":this.params.a11y.retry},{})},i.getAnswerGiven=function(){return this.content.isAnswerGiven()},i.getScore=function(){return this.content?this.content.computeResults().score:this.previousState&&this.previousState.score||0},i.getMaxScore=function(){var t=this.params.paragraphs.length;return"positions"===this.params.behaviour.scoringMode?t:t-1},i.showSolutions=function(){this.setViewState("solutions"),this.content.showSolutions(),this.trigger("resize")},i.resetTask=function(){this.removeFeedback(),this.content.reset(),this.setViewState("task"),this.trigger("resize")},i.getXAPIData=function(){return{statement:this.getXAPIAnswerEvent().data.statement}},i.getXAPIAnswerEvent=function(){var t=this.createXAPIEvent("answered");return t.setScoredResult(this.getScore(),this.getMaxScore(),this,!0,this.isPassed()),t.data.statement.result.response=this.content.getDraggablesOrder().join("[,]"),t},i.createXAPIEvent=function(t){var e=this.createXAPIEventTemplate(t);return r.extend(e.getVerifiedStatementValue(["object","definition"]),this.getxAPIDefinition()),e},i.getxAPIDefinition=function(){var t=this,e={name:{}};return e.name[this.languageTag]=this.getTitle(),e.name["en-US"]=e.name[this.languageTag],e.description={},e.description[this.languageTag]=r.stripHTML(this.getDescription()),e.description["en-US"]=e.description[this.languageTag],e.type="http://adlnet.gov/expapi/activities/cmi.interaction",e.interactionType="sequencing",e.correctResponsesPattern=[],this.params.paragraphs.forEach((function(t,n){e.correctResponsesPattern.push(n)})),e.correctResponsesPattern=[e.correctResponsesPattern.join("[,]")],e.choices=this.params.paragraphs.map((function(e,n){e=r.stripHTML(e);var a={};return a[t.languageTag]=e,a["en-US"]=a[t.languageTag],{id:n,description:a}})),e.extensions=e.extensions||{},"transitions"===this.content.options.scoringMode&&(e.extensions["https://h5p.org/x-api/sequencing-type"]="transitions"),this.content.options.duplicatesInterchangeable&&(e.extensions["https://h5p.org/x-api/duplicates-interchangeable"]=1),e},i.checkAnswer=function(){this.content.disable(),this.hideButton("check-answer"),this.params.behaviour.enableSolutionsButton&&this.getScore()!==this.getMaxScore()&&this.showButton("show-solution"),this.params.behaviour.enableRetry&&this.showButton("try-again"),this.content.showResults();var t=this.getScore(),e=this.getMaxScore(),n=H5P.Question.determineOverallFeedback(this.params.overallFeedback,t/e),r=this.params.a11y.yourResult.replace("@score",":num").replace("@total",":total");this.setFeedback(n.trim(),t,e,r),"task"===this.viewState&&(this.trigger(this.getXAPIAnswerEvent()),this.trigger(this.createXAPIEvent("completed"))),this.setViewState("results")},i.isPassed=function(){return this.getScore()>=this.getMaxScore()},i.getTitle=function(){var t;return this.extras.metadata&&(t=this.extras.metadata.title),t=t||a.DEFAULT_DESCRIPTION,H5P.createTitle(t)},i.getDescription=function(){return this.params.taskDescription||a.DEFAULT_DESCRIPTION},i.getCurrentState=function(){return{order:this.content.getDraggablesOrder(),view:this.viewState,score:"task"===this.viewState?0:this.getScore()}},i.handleInteracted=function(){this.triggerXAPI("interacted")},i.setViewState=function(t){-1!==a.VIEW_STATES.indexOf(t)&&(this.viewState=t,this.content.setViewState(t,a.VIEW_STATES))},a}(H5P.Question);u.DEFAULT_DESCRIPTION="SortParagraphs",u.VIEW_STATES=["task","results","solutions"],H5P=H5P||{},H5P.SortParagraphs=u}()}();